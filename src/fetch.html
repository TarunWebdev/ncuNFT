<html>
  <head>
    <!-- Moralis SDK code -->
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="https://unpkg.com/moralis/dist/moralis.js"></script>
  </head>
  <style>
    div#content{
    display: flex;
    flex-wrap: wrap;
    max-width: 85%;
    align-items: center;
    justify-content: center;
    margin: auto;
  }

  div.nft {
    width: 24%;
    display: flex;
    flex-direction: column;
    align-items: center;
    border: 1px solid #eee;
  }
  </style>

  <body>
    <h1>Polygon NFT Demo</h1>
    <div id="content"></div>

    <input id="nftaddress" type="text">
    <button onclick="getNFT()">Searcher</button>

    <script>


      // connect to Moralis server
        Moralis.initialize("j2nFoDMxP7XTEpzQwtyVflJoMI0nXdYs4FBBWaEx");
        Moralis.serverURL = "https://3ydt3eazpluk.usemoralis.com:2053/server";

        async function getNFT(){
            let address = "0x57B860Fb7b8FD1DE8d7052241f6D4CC6B5E98F6F"

            const options = { 
                chain: 'mumbai', 
                address: '0x57B860Fb7b8FD1DE8d7052241f6D4CC6B5E98F6F', 
            };
          
            const polygonNFTs = await Moralis.Web3.getNFTs(options);
            console.log(polygonNFTs);

            
            polygonNFTs.forEach( e => {
                let url = e.token_uri;

                fetch(url)
                .then(response => response.json())
                .then(data => {
                    
                    let currentDiv = document.getElementById("content");
                    let content = `
                    <div class="nft">
                        <p>${data.name}</p>
                        <p>${data.description ? data.description : ""}</p>
                        <img width=100 height=100 src="${data.image}"/>
                    </div>
                    `
                    currentDiv.innerHTML += content;
                })
            })
        }


    </script>
  </body>
</html>